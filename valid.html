<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./lib/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  </head>

  <body style='margin: 0px; overflow: hidden;'>
    <a-scene 
      vr-mode-ui="enabled: false;"
      renderer="logarithmicDepthBuffer: true;"
      embedded
      arjs="trackingMethod: best; sourceType: webcam;debugUIEnabled: false;" 
      id='cube1'>

      <a-assets>
        <a-asset-item id='cube' src='https://raw.githubusercontent.com/nicolocarpignoli/nicolocarpignoli.github.io/master/ar-playground/models/CesiumMan.gltf'></a-asset-item>
      </a-assets>

      <a-entity 
        gltf-model='#cube'
        position='0 1.43 -3'
        scale='0.65 0.65 0.65'>
        <a-animation 
          dur='4000' 
          attribute='rotation'
          to='0 360 0' 
          repeat='indefinite'>
        </a-animation>
      </a-entity>
    </a-scene>
    <script>
      navigator.permissions.query({name:"camera"})
        .then((result) => {
          if (result.state == "granted"){
            document.getElementById('cube1').style.visibility = 'visible'
          } else {
            document.getElementById('cube1').style.visibility = 'hidden'
          }
          result.onchange = function() {
            if (this.state === "prompt") {
              document.getElementById('cube1').style.visibility = 'hidden'
            } else if (this.state === "granted") {
              document.getElementById('cube1').style.visibility = 'visible'
            } else if (this.state === "denied") {
              document.getElementById('cube1').style.visibility = 'hidden'
            }
          }
        })
    </script>
  </body>
</html>