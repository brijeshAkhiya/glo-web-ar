<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Verified</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
        </script>

        <!-- Loads <model-viewer> for old browsers like IE11: -->
        <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>

    </head>
    <style>
        #y {
            background-image: url(./download.png);
            background-repeat: no-repeat;
            background-size: 20px 20px;
            background-position: 12px 50%;
            background-color: #fff;
            position: fixed;
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            padding: 0px 16px 0px 40px;
            font-family: Roboto Regular, Helvetica Neue, sans-serif;
            font-size: 14px;
            color: #4285f4;
            height: 36px;
            line-height: 36px;
            border-radius: 18px;
            border: 1px solid #DADCE0;
        }
    </style>

    <body onload="">
        <div id="card">
            <!-- All you need to put beautiful, interactive 3D content on your site: -->
            <model-viewer id="x" ar autoplay camera-controls ios-src="./Bulb Models/ver.usdz"
                src="./Bulb Models/ver.glb" alt="Result is Verified">
                <button slot="ar-button" style="display: none;" id="ar"
                    style="background-color: white; border-radius: 4px; border: none; position: absolute; top: 16px; right: 16px; ">
                    Activate AR
                </button>
            </model-viewer>
            <button id="y" style="display: none;">Activate Ar</button>
            <script>
                if (/android/i.test(navigator.userAgent)) {
                    document.querySelector('model-viewer').addEventListener('load', (event) => {
                        const size = document.querySelector('model-viewer').getDimensions();
                        size.x = size.x / 200000;
                        size.y = size.y / 200000;
                        size.z = size.z / 200000;
                        console.log(size)
                        setTimeout(() => {
                            document.getElementById('y').style.display = "block";
                        }, 800);
                    });
                    document.getElementById('y').onclick = () => {
                        document.getElementById('ar').click();

                    };
                    document.querySelector("#x").addEventListener('ar-status', (event) => {
                        if (event.detail.status === 'failed') {
                            console.log(event);
                            document.getElementById('x').style.visibility = "visible";
                            document.getElementById('ar').click();
                            document.getElementById('y').style.display = "none";
                            setTimeout(() => {
                                alert('AR not supported');
                            }, 3000);
                            // document.getElementById('ar').click();
                            // const error = document.querySelector("#error");
                            // error.classList.remove('hide');
                            // error.addEventListener('transitionend', (event) => {
                            //     error.classList.add('hide');
                            // });
                        }
                    });
                } else {
                    document.getElementById('y').style.display = 'none';
                    document.querySelector('model-viewer').addEventListener('load', (event) => {
                        const size = document.querySelector('model-viewer').getDimensions();
                        size.x = size.x / 200000;
                        size.y = size.y / 200000;
                        size.z = size.z / 200000;
                        document.getElementById('ar').click();
                    })
                }
            </script>
        </div>
        <!-- 💁 Include both scripts below to support all browsers! -->

        <!-- Loads <model-viewer> for modern browsers: -->
    </body>

</html>