<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Verified</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
        <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
        </script>
        <!-- JavaScript Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous">
        </script>

        <!-- Loads <model-viewer> for old browsers like IE11: -->
        <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>

    </head>
    <style>
        #y {
            background-image: url(./download.png);
            background-repeat: no-repeat;
            background-size: 20px 20px;
            background-position: 12px 50%;
            background-color: #fff;
            position: fixed;
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            padding: 0px 16px 0px 40px;
            font-family: Roboto Regular, Helvetica Neue, sans-serif;
            font-size: 14px;
            color: #4285f4;
            height: 36px;
            line-height: 36px;
            border-radius: 18px;
            border: 1px solid #DADCE0;
        }
    </style>

    <body onload="">
        <div id="card">
            <!-- All you need to put beautiful, interactive 3D content on your site: -->
            <model-viewer id="x" ar autoplay camera-controls ios-src="./Bulb Models/Verified.usdz"
                src="./Bulb Models/Verified.glb" alt="Result is Verified">
                <button slot="ar-button" style="display: none;" id="ar"
                    style="background-color: white; border-radius: 4px; border: none; position: absolute; top: 16px; right: 16px; ">
                    Activate AR
                </button>
            </model-viewer>
            <!-- Button trigger modal -->
<button type="button" id="abc" style="display: none;" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  </button>
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">AR not supported</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            Please install ARCORE from play store
        </div>
        <div class="modal-footer">
          <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
          <a href="https://play.google.com/store/apps/details?id=com.google.ar.core&hl=en_IN&gl=US"><button type="button" class="btn btn-primary"> Install</button></a>
        </div>
      </div>
    </div>
  </div>
            <button id="y" style="display: none;">Activate Ar</button>
            <script>
                if (/android/i.test(navigator.userAgent)) {
                    document.querySelector('model-viewer').addEventListener('load', (event) => {
                        const size = document.querySelector('model-viewer').getDimensions();
                        size.x = size.x / 200000;
                        size.y = size.y / 200000;
                        size.z = size.z / 200000;
                        console.log(size)
                        setTimeout(() => {
                            document.getElementById('y').style.display = "block";
                        }, 800);
                    });
                    document.getElementById('y').onclick = () => {
                        document.getElementById('ar').click();

                    };
                    document.querySelector("#x").addEventListener('ar-status', (event) => {
                        if (event.detail.status === 'failed') {
                            console.log(event);
                            document.getElementById('x').style.visibility = "visible";
                            document.getElementById('ar').click();
                            document.getElementById('y').style.display = "none";
                            setTimeout(() => {
                                document.getElementById('abc').click();
                            }, 3000);
                            // document.getElementById('ar').click();
                            // const error = document.querySelector("#error");
                            // error.classList.remove('hide');
                            // error.addEventListener('transitionend', (event) => {
                            //     error.classList.add('hide');
                            // });
                        }
                    });
                } else {
                    document.getElementById('y').style.display = 'none';
                    document.querySelector('model-viewer').addEventListener('load', (event) => {
                        const size = document.querySelector('model-viewer').getDimensions();
                        size.x = size.x / 200000;
                        size.y = size.y / 200000;
                        size.z = size.z / 200000;
                        document.getElementById('ar').click();
                    })
                }
            </script>
        </div>
        <!-- ðŸ’ Include both scripts below to support all browsers! -->

        <!-- Loads <model-viewer> for modern browsers: -->
    </body>

</html>