<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="module" src="./js/model-viewer.min.js"></script>
    <script nomodule src="./js/model-viewer-legacy.js"></script>
    <style>
      #error {
        background-color: #ffffffdd;
        border-radius: 16px;
        padding: 16px;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate3d(-50%, -50%, 0);
        transition: opacity 0.3s;
      }

      #error.hide {
        opacity: 0;
        visibility: hidden;
        transition: visibility 2s, opacity 1s 1s;
      }
    </style>
  </head>
  <body>
    <model-viewer id="model-viewer" camera-controls ar shadow-intensity="1"
    src="./GloBulb/Not Verified_Bulb/Not Verified_Bulb.FBX.gltf"
      ios-src="./GloBulb/Not Verified_Bulb.FBX.usdz" alt="Bulb Verified">
      <button id="ar" slot="ar-button"
        style="width: 50px; height: 50px; background-color: white; border-radius: 4px; border: none; position: absolute; top: 16px; right: 16px; ">
        Activate AR
      </button>
    </model-viewer>
    <script>
      document.querySelector('button').style.display = "none";
      document.querySelector("model-viewer").addEventListener('ar-status', (event) => {
        if (event.detail.status === 'failed') {
          alert('failed');
          const error = document.querySelector("#error");
          error.classList.remove('hide');
          error.addEventListener('transitionend', (event) => {
            error.classList.add('hide');
          });
        }
      });
      document.querySelector('model-viewer').addEventListener('load', () => {
        if (document.querySelector('button')) {
          document.querySelector('button').click();
          // setTimeout(() => {
          //   document.querySelector("model-viewer").play();
          // }, 3000);
        }
      });
    </script>
  </body>

</html>